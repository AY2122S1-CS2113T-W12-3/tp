@startuml
!include style.puml

box STORAGE_COLOR
Participant ":StorageFile" as Storage
end box
box FILE_COLOR
Participant ":file" as File
end box
box LOGIC_COLOR
Participant ":MemberEncoder" as MemberEncoder
Participant ":EventEncoder" as EventEncoder
end box


-> Storage: save(eventsList : ArrayList<Event>)

activate Storage

Storage -> File : File(DEFAULT_FILE_PATH)
activate File
return saveFile
|||
Storage --> Storage: checkFileIsValid
activate Storage #orange
return
|||
Storage -> MemberEncoder: encodeMembersList
activate MemberEncoder
return encodedMembersList
|||
Storage -> EventEncoder: encodeEventsList
activate EventEncoder
return encodedEventsList
|||
Storage -> Storage: writeToFile
activate Storage #orange
return
|||
return
@enduml